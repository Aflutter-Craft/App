name: Web App
on: [push]
jobs:
  build:
    runs-on: ubuntu-latest
    steps:
    - run: |
          git config --global user.email "abubakaryagob@gmail.com"
          git config --global user.name "Blacksuan19"
    - uses: actions/checkout@v2
    - uses: actions/setup-java@v1
      with:
        java-version: "12.x"
    - uses: subosito/flutter-action@v1.5.0
      with:
        channel: "master" # or: 'beta', 'dev' or 'master'
    - run: flutter pub get
    - run: flutter pub global activate peanut
    - run: export PATH="$PATH":"$HOME/.pub-cache/bin" 
    - run: flutter build web
    - run: flutter pub global run peanut:peanut
    - run: git push --force origin --set-upstream gh-pages